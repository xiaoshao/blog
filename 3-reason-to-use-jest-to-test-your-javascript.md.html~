<!DOCTYPE html>
<html>
<head>
<title>3 Reason to move from jasmine to jest</title>
<!-- 2015-03-06 Fri 09:46 -->
<meta  charset="utf-8">
<meta  name="generator" content="Org-mode">
<meta  name="author" content="Jichao Ouyang">
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/style/pixyll.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="/index.html"> UP </a>
 |
 <a accesskey="H" href="https://oyanglul.us/~jichao.ouyang.html"> HOME </a>
</div><div id="content">
<h1 class="title">3 Reason to move from jasmine to jest</h1>
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">ğŸŒ°</a></li>
<li><a href="#sec-2">1. Auto Mock</a></li>
<li><a href="#sec-3">2. jsdom</a></li>
<li><a href="#sec-4">3. Manual Mock</a></li>
<li><a href="#sec-5">etc</a></li>
<li><a href="#sec-6">Wrapup</a></li>
</ul>
</div>
</nav>
<ul class="org-ul">
<li><a href="https://rawgit.com/jcouyang/cc0e65e36af9c7c001e2/raw/b100f45ebfe7c196043cb10f967123f9ebde7ffc/1-painless-javascript-testing.html#/28">slides</a>
</li>
<li><a href="https://github.com/jcouyang/jest-sample">source</a>
</li>
</ul>

<p>
Javascript çš„æµ‹è¯•, ä¸ç®¡åœ¨ç”¨ <a href="http://jasmine.github.io">jasmine</a> è¿˜æ˜¯
<a href="http://visionmedia.github.io/mocha/">mocha</a>, éƒ½æ˜¯å¾ˆå¤´ç–¼çš„äº‹æƒ….
ä½†æ˜¯è‡ªä»æœ‰äº† <a href="http://facebook.github.io/jest/">jest</a>, ä¸€å£æ°”å†™7ä¸ªæµ‹è¯•,
è…°ä¹Ÿä¸ç–¼äº†, å¤´ä¹Ÿä¸ç–¼äº†.
</p>

<p>
åªéœ€è¦ 3 ä¸ªç†ç”±
</p>

<p>
åœ¨è¯´ç”¨ jest æµ‹ä¸ºä»€ä¹ˆå¥½ä¹‹å‰,æˆ‘ä»¬å…ˆæ¥çœ‹æˆ‘ä»¬è¦æµ‹çš„ä¸€ä¸ªä¾‹å­.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">ğŸŒ°</h2>
<div class="outline-text-2" id="text-1">
<p>
æ¯”å¦‚æˆ‘è¦å†™ä¸€ä¸ªæ¨¡å—è¦å»å–github ç”¨æˆ·çš„follower å’Œä»–æ‰€æœ‰ repo çš„ follower
æ•°é‡.
</p>

<p>
é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æœ‰ä¸€ä¸ª User çš„ Model.
</p>

<div class="org-src-container">

<pre class="src src-js"><span style="color: #b22222;">// </span><span style="color: #b22222;">user.js</span>
<span style="color: #a020f0;">var</span> <span style="color: #b8860b;">$</span> = require(<span style="color: #bc8f8f;">'jquery'</span>);
<span style="color: #a020f0;">function</span> <span style="color: #0000ff;">User</span>(<span style="color: #b8860b;">name</span>) {
  <span style="color: #5f9ea0;">this</span>.name = name;
  <span style="color: #5f9ea0;">this</span>.followers = 0;
}
User.<span style="color: #5f9ea0;">prototype</span>.fetch = <span style="color: #a020f0;">function</span>(){
  <span style="color: #a020f0;">return</span> $.ajax({
    url: <span style="color: #bc8f8f;">'https://api.github.com/users/'</span> + <span style="color: #5f9ea0;">this</span>.name,
    method: <span style="color: #bc8f8f;">'get'</span>,
    dataType: <span style="color: #bc8f8f;">'json'</span>
  }).then(<span style="color: #a020f0;">function</span>(<span style="color: #b8860b;">data</span>){
      <span style="color: #5f9ea0;">this</span>.followers = data.followers;
  }.bind(<span style="color: #5f9ea0;">this</span>));
};
module.exports = User;
</pre>
</div>

<p>
æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ª repo çš„ model, å¤§åŒå°å¼‚ç•¥å»
</p>

<p>
æœ€å, æ•´åˆè¿™ä¿©æˆ‘è¦çš„ä¸œè¥¿, å¹¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š
</p>

<div class="org-src-container">

<pre class="src src-js"><span style="color: #b22222;">// </span><span style="color: #b22222;">follower.js</span>
<span style="color: #a020f0;">var</span> <span style="color: #b8860b;">$</span> = require(<span style="color: #bc8f8f;">'jquery'</span>);
<span style="color: #a020f0;">function</span> <span style="color: #0000ff;">followerOf</span>(<span style="color: #b8860b;">user</span>, <span style="color: #b8860b;">repo</span>) {
  user.fetch().then(repo.fetch).then(<span style="color: #a020f0;">function</span>(<span style="color: #b8860b;">_</span>){
    $(<span style="color: #bc8f8f;">'#content'</span>).text(user.name +<span style="color: #bc8f8f;">"'s followers: "</span> + user.followers +
                       <span style="color: #bc8f8f;">" and his repo "</span>+ repo.name +<span style="color: #bc8f8f;">"'s followers:"</span> + repo.followers);
    });
};

module.exports = followerOf;
</pre>
</div>

<p>
&#x2013;
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">1. Auto Mock</h2>
<div class="outline-text-2" id="text-2">
<p>
è‡ªåŠ¨ mock å®åœ¨æ˜¯æœ€å¤§çš„äº®ç‚¹, jest é‡å†™äº† require, æ‰€ä»¥ä½ çš„ä»£ç é‡Œçš„æ‰€æœ‰
require æ¥çš„ä¸œè¥¿éƒ½è‡ªåŠ¨ mock.
</p>

<p>
å› ä¸ºåœ¨ä½ çš„æµ‹è¯•ä¸­å¾€å¾€åªå…³å¿ƒä¸€ä¸ªæ¨¡å—, å¯¹äºä»–çš„æ‰€æœ‰ä¾èµ–å…¶å®éƒ½æ˜¯æ— æ‰€è°“çš„.
</p>

<p>
åœ¨ä¾‹å­ä¸­, å¦‚æœæˆ‘ä»¬åœ¨æµ‹ repo.js çš„æ—¶å€™å®Œå…¨ä¸å…³å¿ƒé‚£ä¸¤ä¸ª jquery çš„ ajax
æ–¹æ³•åˆ°åº• å†™å¯¹æ²¡å†™å¯¹,åæ­£æˆ‘ä»¬æœŸæœ›èƒ½ä» ajax é‡Œé¢æ‹¿åˆ°æˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿å°±å¯¹äº†.
å› æ­¤, æˆ‘å¸Œæœ› jquery çš„ æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯ mock çš„. jest è®©ä½ å¾ˆè½»æ¾çš„åšåˆ°è¿™ç‚¹,
å› ä¸ºæ˜¯è‡ªåŠ¨mockæ‰€æœ‰require çš„ä¸œè¥¿, è€Œ å¯¹äºç›®æ ‡æµ‹è¯•æ¨¡å—,
åªéœ€è¦è¯´æˆ‘=dontMock= æˆ‘çš„ç›®æ ‡æ¨¡å—å°±å¥½äº†.
</p>

<div class="org-src-container">

<pre class="src src-js">jest.dontMock(<span style="color: #bc8f8f;">'../repo'</span>);
describe(<span style="color: #bc8f8f;">'Repo Model'</span>, <span style="color: #a020f0;">function</span>(){
  <span style="color: #a020f0;">var</span> <span style="color: #b8860b;">repo</span>;
  beforeEach(<span style="color: #a020f0;">function</span>(){
        <span style="color: #a020f0;">var</span> <span style="color: #b8860b;">$</span> = require(<span style="color: #bc8f8f;">'jquery'</span>).setAjaxReturn({stargazers_count: 23});
        <span style="color: #a020f0;">var</span> <span style="color: #b8860b;">Repo</span> = require(<span style="color: #bc8f8f;">'../repo'</span>);
    repo = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Repo</span>(<span style="color: #bc8f8f;">'jcouyang'</span>, <span style="color: #bc8f8f;">'gira'</span>);

    });

  it(<span style="color: #bc8f8f;">'should populate properties with data from github api'</span>, <span style="color: #a020f0;">function</span>(){
        repo.fetch();
        expect(repo.followers).toBe(23);
  });
});
</pre>
</div>

<p>
æ‰€ä»¥è¿™ä¸ªæµ‹è¯•çœ‹èµ·æ¥å°±è·Ÿæ–‡æ¡£ä¸€æ ·äº†,
</p>

<ol class="org-ol">
<li><code>dontMock('./repo')</code> è¯´æ˜æˆ‘å…³å¿ƒ=repo= è¿™ä¸ªæ¨¡å—, å…¶ä»–æˆ‘éƒ½ä¸ care.
</li>
<li>before æ˜¯æˆ‘è¦è¿›è¡Œæ“ä½œæ‰€éœ€è¦çš„ä¸œè¥¿.
</li>

<li>æˆ‘è¦ jquery ajax è¯·æ±‚ç»™æˆ‘æƒ³è¦çš„æ•°æ®
</li>
<li>æˆ‘è¦ä¸€ä¸ªæˆ‘è¦æµ‹çš„ Repo ç±»çš„å®ä¾‹
</li>

<li>it è¯´æ˜æˆ‘å…³å¿ƒåœ°è¡Œä¸ºæ˜¯ç¥é©¬
</li>

<li>æˆ‘å…³å¿ƒ fetch çš„è¡Œä¸º,æ˜¯å»å–æ•°æ®å¹¶ç»™æˆ‘æŠŠæ•°æ®å¡«å……åˆ°æˆ‘çš„ repo å®ä¾‹ä¸­
</li>
</ol>

<blockquote>
<p>
ä½ å¯èƒ½è¦é—® <code>segAjaxReturn</code> æ˜¯å“ªé‡Œå†’å‡ºæ¥çš„. å¿ä¸€å¿ç¨åå‘Šè¯‰ä½ .
</p>
</blockquote>

<p>
æœ‰æ²¡æœ‰çœ‹è™½ç„¶æˆ‘æ˜¾å¼çš„ mock jquery, ä½†æ˜¯ Repo é‡Œé¢ require çš„ jquery
å…¶å®æ˜¯å‡çš„, ä¸ç„¶æˆ‘ä»¬å°±çœŸçš„è®¿é—® github api äº†. é‚£æ ·å°±ä¸ä¼šæ¯æ¬¡éƒ½è¿”å› 23 ä¸ª
follower äº†.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">2. jsdom</h2>
<div class="outline-text-2" id="text-3">
<p>
å¥½äº†ç°åœ¨æˆ‘ä»¬æ¥æµ‹ follower.js, å…ˆçœ‹ follower åˆ°åº•å¹²äº†ä»€ä¹ˆ, æ‹¿åˆ° user å’Œ
repo çš„ä¿¡æ¯ç„¶åç»„æˆä¸€å¥è¯æ”¾åˆ°é¡µé¢ id ä¸º content çš„å…ƒç´ ä¸‹é¢.
</p>

<p>
å¥½, æ‰€ä»¥æˆ‘ä»¬å…³å¿ƒ - ç»„å‡ºæ¥çš„è¯å¯¹ä¸å¯¹ - æœ‰æ²¡æœ‰æ”¾åˆ° content å…ƒç´ ä¸‹, æ‰€ä»¥
jquery çš„æ“ä½œå¯¹ä¸å¯¹ä¹Ÿæ˜¯æˆ‘ä»¬å…³å¿ƒçš„ä¸€éƒ¨åˆ†
</p>

<p>
æˆ‘ä»¬ä¸å…³å¿ƒ - user å¹²äº†ä»€ä¹ˆ - repo å¹²äº†ä»€ä¹ˆ
</p>

<p>
è¿™æ ·,å…³å¿ƒçš„å°±æ˜¯ä¸èƒ½ mock çš„
</p>

<div class="org-src-container">

<pre class="src src-js">jest.dontMock(<span style="color: #bc8f8f;">'../follower'</span>)
    .dontMock(<span style="color: #bc8f8f;">'jquery'</span>);
describe(<span style="color: #bc8f8f;">'follower'</span>, <span style="color: #a020f0;">function</span>(){
  <span style="color: #a020f0;">var</span> <span style="color: #b8860b;">user</span>, <span style="color: #b8860b;">repo</span>, <span style="color: #b8860b;">follower</span>;
    <span style="color: #a020f0;">var</span> <span style="color: #b8860b;">$</span> = require(<span style="color: #bc8f8f;">'jquery'</span>);
  beforeEach(<span style="color: #a020f0;">function</span>(){
        <span style="color: #a020f0;">var</span> <span style="color: #b8860b;">Repo</span> = require(<span style="color: #bc8f8f;">'../repo'</span>);
        <span style="color: #a020f0;">var</span> <span style="color: #b8860b;">User</span> = require(<span style="color: #bc8f8f;">'../user'</span>);
        follower = require(<span style="color: #bc8f8f;">'../follower'</span>);
        user = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">User</span>(<span style="color: #bc8f8f;">'jcouyang'</span>);
    repo = <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Repo</span>(<span style="color: #bc8f8f;">'jcouyang'</span>, <span style="color: #bc8f8f;">'gira'</span>);
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#25105;&#20204;&#19981;&#20851;&#24515; user, &#20294;&#26159;&#25105;&#20204;&#24076;&#26395;&#20182;&#33021;&#36820;&#22238;&#19968;&#20010; deferred &#31867;&#22411;</span>
      user.fetch.mockReturnValue($.Deferred().resolve(<span style="color: #bc8f8f;">'dont care'</span>));
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#25105;&#20204;&#35753;&#25105;&#20204;&#19981;&#20851;&#24515;&#30340; user &#21644; repo &#36820;&#22238;&#25105;&#20204;&#26399;&#26395;&#30340;&#19996;&#35199;&#23601;&#22909;</span>
        user.name =<span style="color: #bc8f8f;">'jcouyang'</span>;
        user.followers = 20;
        repo.name = <span style="color: #bc8f8f;">'gira'</span>;
        repo.followers = 21;
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#26399;&#24453;&#39029;&#38754;&#19978;&#26377;&#19968;&#20010;  id &#20026; content &#30340;&#20803;&#32032;</span>
        document.body.innerHTML = <span style="color: #bc8f8f;">'&lt;div id="content"&gt;&lt;/div&gt;'</span>;
    });

  it(<span style="color: #bc8f8f;">'should populate properties with data from github api'</span>, <span style="color: #a020f0;">function</span>(){
        follower(user,repo);
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#24076;&#26395; content &#19978;&#33021;&#24471;&#21040;&#24819;&#35201;&#30340;&#20869;&#23481;</span>
        expect($(<span style="color: #bc8f8f;">"#content"</span>).text()).toBe(<span style="color: #bc8f8f;">'jcouyang\'s followers: 20 and his repo gira\'s followers:21'</span>);
  });
});
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">3. Manual Mock</h2>
<div class="outline-text-2" id="text-4">
<p>
å¥½äº†, è¯´å¥½çš„è§£é‡Š =setAjaxReturn=æ˜¯æ€ä¹ˆå›äº‹çš„
</p>

<p>
å—¯å—¯, æ˜¯è¿™æ ·çš„, è™½ç„¶ jest è‡ªåŠ¨ mock äº†æˆ‘ä»¬ä¸å…³å¿ƒçš„æ¨¡å—,
ä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯ä¼šå¸Œæœ› è¿™ä¸ª mock çš„ç©æ„èƒ½æœ‰ä¸€äº›æˆ‘ä»¬æœŸæœ›çš„è¡Œä¸º,
ä¹Ÿå°±æ˜¯æŒ‰æˆ‘ä»¬çš„æœŸæœ›è¿”å›ä¸€äº›ä¸œè¥¿. æ¯”å¦‚ è¿™é‡Œå°±æ˜¯æˆ‘ä»¬ä¸å…³å¿ƒ ajax çš„é€»è¾‘,
ä½†æ˜¯æˆ‘ä»¬éœ€è¦ä»–èƒ½ç»™æˆ‘ä»¬è¿”å›ä¸€ä¸ªä¸œè¥¿,å¹¶ä¸”å¯ä»¥ thenable. æ‰€ä»¥å•çº¯çš„ mock
å¯¹è±¡æˆ–å‡½æ•°éƒ½ä¸èƒ½åšåˆ°, æ‰€ä»¥æœ‰äº† manual mock è¿™ç§ä¸œè¥¿.
</p>

<p>
ç”¨ manual mock éœ€è¦å»ºä¸€ä¸ª=__ mocks__= æ–‡ä»¶å¤¹,ç„¶åæŠŠæ‰€æœ‰çš„ mock éƒ½æ‰”è¿›å».
æ¯”å¦‚ æˆ‘æƒ³ mock jquery, é‚£ä¹ˆæˆ‘å»ºä¸€ä¸ª=jquery.js= æ‰”è¿›å»
</p>

<pre class="example">
var data = {};
var mockDefered = function(data){
    return {
        then: function(cb){
            return mockDefered(cb(data));
        }
    };
};

function ajax() {
  return mockDefered(data);
}

function setAjaxReturn(shouldbe){
    data = shouldbe;
}
exports.setAjaxReturn = setAjaxReturn;
exports.ajax = ajax;
</pre>

<p>
ç»ˆäºçœ‹è§=setAjaxReturn=åœ¨å“ªé‡Œå®šä¹‰äº†:sweat\<sub>smile</sub>: è¿™é‡Œæš´éœ²ä¸¤ä¸ªå‡½æ•° -
setAjaxReturn: å¯ä»¥è®¾ç½®æˆ‘å¸Œæœ› ajax è¿”å›çš„å€¼ - ajax: å•çº¯çš„è¿”å›è¿™ä¸ª
thenable.
</p>

<p>
æ‰€ä»¥æˆ‘ä¹Ÿä¸éœ€è¦æ˜¾ç¤ºçš„å£°æ˜ mock jqueryä»€ä¹ˆä»€ä¹ˆçš„, ç›´æ¥åœ¨æµ‹è¯•é‡Œè®¾ç½®ajax
çš„è¿”å›å€¼å°±å¥½äº†.
</p>

<div class="org-src-container">

<pre class="src src-js"><span style="color: #a020f0;">var</span> <span style="color: #b8860b;">$</span> = require(<span style="color: #bc8f8f;">'jquery'</span>).setAjaxReturn({stargazers_count: 23});
</pre>
</div>

<p>
è¿™æ˜¯ repo é‡Œé¢ require çš„ jquery å·²ç»è¢« mock å¹¶ä¸”åªè¦æ‰ ajax éƒ½ä¼šè¿”å›æˆ‘
æœŸæœ›çš„å€¼.
</p>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">etc</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li><b>å¹¶è¡Œæµ‹è¯•</b>: è¿˜ç”¨è¯´ä¹ˆ, æ—¢ç„¶å·²ç»å¦‚æ­¤æ¨¡å—åŒ–å¥½äº†, user repo ä»¥åŠ follower
çš„æµ‹è¯•å®Œå…¨æ˜¯äº’ä¸ä¾èµ–. æ²¡æœ‰ä»€ä¹ˆç†ç”±ä¸€ä¸ªä¸€ä¸ªæµ‹.
å› æ­¤3ä¸ªæµ‹è¯•çš„è€—æ—¶å–å†³äºæœ€é•¿æ—¶é—´çš„é‚£ä¸ª. æ‰€ä»¥å¦‚æœæœ‰
é‚£ä¸ªæµ‹è¯•ç‰¹åˆ«è€—æ—¶,è¯´æ˜æ¨¡å—è¿˜ä¸å¤Ÿç»†, å¤šæ‹†å‡ ä¸ªå°±å¿«äº†.
</li>
<li><b>promise</b>: ä½¿ç”¨ pit() æ¥æµ‹è¯• thenable çš„å¯¹è±¡, æ¯”å¦‚ repo çš„ä¾‹å­,å°±
keyi å†™æˆ

<pre class="example">
pit('should populate properties with data from github api', function(){
  return repo.fetch().then(
expect(repo.followers).toBe(23);
  );
});
</pre>
</li>

<li><b>Timer mocks</b>: å¯ä»¥ä½¿ç”¨ mock çš„ timer å’Œ ticks, ä¹Ÿå°±æ˜¯ä½ å¯ä»¥åŠ é€Ÿ
æ‰€æœ‰çš„setTimeout, setInterval, clearTimeout, clearIntervalè¡Œä¸º.
ä¸éœ€è¦ç­‰å¾….
<code>js setTimeout(function() { callback(); }, 1000);  expect(callback).not.toBeCalled();  jest.runAllTimers(); expect(callback).toBeCalled()</code>
</li>
</ul>

<hr >
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">Wrapup</h2>
<div class="outline-text-2" id="text-6">
<p>
æ‰€ä»¥è¯´ç™½äº†, jest å…¶å®ä¹Ÿæ˜¯ä¸ªæ¦‚å¿µ, æ¨èä½¿ç”¨æ¨¡å—åŒ–çš„æ€æƒ³,
è¿™æ ·æˆ‘åªéœ€è¦ä¿è¯æ¯ä¸ªæ¥å£çš„ IO æ­£ç¡®, å°±å¯ä»¥ä¿è¯æ•´ä¸ªç¨‹åºæ²¡é—®é¢˜.
è¿™æ ·åˆ’åˆ†ä¸‹æ¥æµ‹è¯•å°±ä¼šå˜å¾—ç®€å•åˆ°åªéœ€è¦å…³å¿ƒå½“ç„¶æ¨¡å—çš„ IO ä»è€Œ å¯ä»¥ mock
æ‰æ‰€æœ‰å…¶ä»–ä¾èµ–. çœŸæ­£æ¨¡å—åŒ–å¥½çš„ä»£ç å•çº¯çš„åªç”¨ jasmine æˆ–è€… mocha
éƒ½åº”è¯¥æ˜¯å¾ˆå¥½æµ‹çš„. åªæ˜¯åœ¨è¿™ä¸ªæ¦‚å¿µä¹‹ä¸Šçœå»äº†å¾ˆå¤šä¸å¿…è¦çš„ mock ä»£ç , å› ä¸ºè¦
mock çš„ ä¾èµ–æ€»æ˜¯å å¤§å¤šæ•°çš„, è€Œå…³å¿ƒçš„, å¾€å¾€åªæ˜¯é‚£ä¹ˆä¸€ä¸¤ä¸ª.
</p>

<p>
<a href="https://ga-beacon.appspot.com/UA-32314154-5/blogist/3-reason-to-use-jest">https://ga-beacon.appspot.com/UA-32314154-5/blogist/3-reason-to-use-jest</a>
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p>Author: Jichao Ouyang</p>
<p><a href="https://travis-ci.org/jcouyang/blog"><img src="https://travis-ci.org/jcouyang/blog.svg?branch=master"></a> with <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p><a href="http://pipes.yahoo.com/pipes/pipe.run?_id=1096b1ad01dc8d4309ab448eefc442f1&_render=rss&orgblogurl=https://blog.oyanglul.us/">RSS</a> | <a href="/theindex.html">INDEX</a></p>

<!-- Google Analystics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32314154-10', 'auto');
  ga('send', 'pageview');

</script>
<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'orgblog';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<!-- Swiftype Search -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

  _st('install','eGLqWnAM75a66SiXKVW3');
</script>
</div>
</body>
</html>
